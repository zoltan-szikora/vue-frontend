{"version":3,"sources":["webpack:///./src/views/auth/DeleteProfile.vue","webpack:///./src/views/auth/DeleteProfile.vue?826d"],"names":["class","role","for","user","icon","success","errorMessage","status","name","submitUpdateStatus","accept-charset","type","passwordValidity","currentPassword","placeholder","id","required","handleProfileDelete","data","loading","computed","mapGetters","methods","mapActions","this","$swal","title","text","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","password","compareSync","updateStatus","response","u","updateUser","showConfirmButton","timer","error","errors","defaultMessage","render"],"mappings":"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","file":"js/chunk-2d0abe3d.49f6780a.js","sourcesContent":["<template>\r\n  <div v-if=\"user\">\r\n    <div class=\"container my-3 pb-5 content\">\r\n      <div class=\"pt-3\">\r\n        <h1 class=\"display-5 fw-bold\"><font-awesome-icon icon=\"trash\" class=\"me-1\" />Delete Your Profile</h1>\r\n        <hr class=\"my-4\">\r\n      </div>\r\n\r\n      <div  class=\"px-4\">\r\n        <!-- Messages -->\r\n        <div v-if=\"success\" class=\"alert alert-success rounded-0\">Your request is accepted!</div>\r\n        <div v-if=\"errorMessage\" class=\"alert alert-danger rounded-0\" role=\"alert\">{{ errorMessage }}</div>\r\n\r\n        <div v-if=\"!success\">\r\n          <div v-if=\"user.status=='P'\" class=\"alert alert-info rounded-0\">You have already sent the request!</div>\r\n          <div v-if=\"user.status=='A'\">\r\n            <h2 class=\"col-md-8 fs-4\">Submit a request</h2>\r\n            <p><strong>Please Note: </strong> If you delete your profile, you won't be able to reactivate it later.</p>\r\n            <form name=\"update\" @submit.prevent=\"submitUpdateStatus\" class=\"row g-3\" accept-charset=\"utf-8\">\r\n              <div class=\"mx-auto border form-bg px-5 py-3\">\r\n\r\n                <div class=\"mb-3\">\r\n                  <label for=\"password\">Password</label>\r\n                  <input type=\"password\" class=\"form-control\" :class=\"{ invalid: passwordValidity === 'invalid' }\" name=\"password\" v-model.trim=\"currentPassword\" placeholder=\"Password\" id=\"password\" required>\r\n                  <span class=\"invalid-feedback\">Password is required!</span>\r\n                  <span class=\"err-msg\" v-if=\"passwordValidity == 'invalid'\">Your password is invalid!</span>\r\n                </div>\r\n                <button type=\"button\" class=\"btn btn-danger rounded-0\" @click=\"handleProfileDelete\">Delete Profile</button>\r\n\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport vuex from \"vuex\";\r\nimport UserService from \"@/services/user.service\";\r\nimport bcrypt from 'bcryptjs';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      success: false,\r\n      errorMessage: \"\",\r\n      passwordValidity: \"pending\",\r\n      currentPassword: \"\"\r\n    }\r\n  },\r\n  computed: {\r\n    ...vuex.mapGetters([\"user\"])\r\n  },\r\n  methods: {\r\n    ...vuex.mapActions([\"updateUser\"]),\r\n    handleProfileDelete() {\r\n      this.$swal({\r\n        title: 'Are you sure?',\r\n        text: \"Are you really want to delete your profile?\",\r\n        icon: 'question',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#dc3545',\r\n        cancelButtonColor: '#20c997',\r\n        confirmButtonText: 'Yes, delete it!'\r\n      }).then((result) => {\r\n        if (result.isConfirmed) {\r\n          this.submitUpdateStatus();\r\n        }\r\n      });\r\n    },\r\n    submitUpdateStatus() {\r\n      this.loading = true;\r\n      if (!this.currentPassword) {\r\n        this.passwordValidity = \"invalid\";\r\n        this.loading = false;\r\n        this.$swal({\r\n          icon: 'info',\r\n          title: 'Password fied is empty!'\r\n        });\r\n        return;\r\n      }\r\n\r\n      if (this.currentPassword == this.user.password || bcrypt.compareSync(this.currentPassword, this.user.password)) {\r\n        this.passwordValidity = \"valid\";\r\n      } else {\r\n        this.passwordValidity = \"invalid\";\r\n        this.loading = false;\r\n        this.$swal({\r\n          icon: 'error',\r\n          title: 'Your password is invalid!'\r\n        });\r\n        return;\r\n      }\r\n\r\n      UserService.updateStatus(this.user, this.currentPassword, \"P\")\r\n      .then(\r\n        (response) => {\r\n          const u = response.data;\r\n          this.updateUser(u);\r\n          this.success = true;\r\n          this.errorMessage = \"\";\r\n          this.$swal({\r\n            icon: 'success',\r\n            title:'Ok!',\r\n            showConfirmButton: false,\r\n            timer: 1500\r\n          });\r\n        },\r\n        error => {\r\n          if (!error.response) {\r\n            this.errorMessage =\r\n              \"Unexpected error: \" +\r\n              ((error && error.errorMessage) || error);\r\n          } else if (error.response.status === 401) {\r\n            this.errorMessage = \"Password is not valid!\";\r\n          } else {\r\n            this.errorMessage =\r\n              \"Error: \" + error.response.data.errors[0].defaultMessage;\r\n          }\r\n        }\r\n      )\r\n      .then(() => {\r\n        this.loading = false;\r\n      });\r\n\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import { render } from \"./DeleteProfile.vue?vue&type=template&id=1f0365f6\"\nimport script from \"./DeleteProfile.vue?vue&type=script&lang=js\"\nexport * from \"./DeleteProfile.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}