{"version":3,"sources":["webpack:///./src/views/auth/UpdateUser.vue","webpack:///./src/components/UpdateUserData.vue","webpack:///./src/components/UpdateUserData.vue?fbca","webpack:///./src/views/auth/UpdateUser.vue?df06"],"names":["user","class","role","for","icon","success","errorMessage","name","submitUpdatedData","accept-charset","type","updatedUser","firstName","placeholder","title","firstNamePattern","minlength","maxlength","pattern","required","lastName","lastNamePattern","dateOfBirth","min","max","getCurrentDate","username","readonly","email","passwordValidity","currentPassword","submitted","disabled","loading","data","salt","genSaltSync","this","currentDate","passwordPattern","props","Object","computed","mapGetters","methods","mapActions","password","compareSync","update","then","response","u","updateUser","$swal","showConfirmButton","timer","error","status","errors","defaultMessage","mounted","render","components","UpdateUserData"],"mappings":"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","file":"js/chunk-2d0c0c83.f1952a98.js","sourcesContent":["<template>\r\n  <div>\r\n    <update-user-data v-bind:user=\"user\"></update-user-data>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport vuex from \"vuex\";\r\nimport UpdateUserData from \"@/components/UpdateUserData\";\r\n\r\nexport default {\r\n  components: {\r\n    UpdateUserData\r\n  },\r\n  computed: {\r\n    ...vuex.mapGetters([\"user\"])\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","<template>\r\n  <div class=\"container my-3 pb-5\" v-if=\"user\">\r\n    <div class=\"pt-3\">\r\n      <h1 class=\"display-5 fw-bold\"><font-awesome-icon icon=\"user-edit\" class=\"me-1\" />Edit Profile</h1>\r\n      <hr class=\"my-4\">\r\n    </div>\r\n    <div class=\"px-4\">\r\n      <div v-if=\"success\" class=\"alert alert-success rounded-0\">Your profile information updated successfully!</div>\r\n      <div v-if=\"errorMessage\" class=\"alert alert-danger rounded-0\" role=\"alert\">{{ errorMessage }}</div>\r\n\r\n      <div v-if=\"!success\" >\r\n        <h2 class=\"col-md-8 fs-4\">Edit your personal info</h2>\r\n        <form name=\"update\" @submit.prevent=\"submitUpdatedData\" class=\"row g-3\" accept-charset=\"utf-8\">\r\n          <div class=\"mx-auto border form-bg px-5 py-3\">\r\n\r\n            <div class=\"row\">\r\n              <div class=\"col-md-6 mb-3\">\r\n                <label for=\"firstName\">First Name</label>\r\n                <input type=\"text\" class=\"form-control\" name=\"firstName\" v-model.trim=\"updatedUser.firstName\" placeholder=\"First name\" :title=\"firstNamePattern\"\r\n                  minlength=\"2\" maxlength=\"20\" pattern=\"[A-Za-záéiíoóöőuúüűÁÉIÍOÓÖŐUÚÜŰ]{2,20}\" required>\r\n                <span class=\"invalid-feedback\">First name is invalid!</span>\r\n              </div>\r\n              <div class=\"col-md-6 mb-3\">\r\n                <label for=\"lastName\">Last Name</label>\r\n                <input type=\"text\" class=\"form-control\" name=\"lastName\" v-model.trim=\"updatedUser.lastName\" placeholder=\"Last name\" :title=\"lastNamePattern\"\r\n                  minlength=\"2\" maxlength=\"20\" pattern=\"[A-Za-záéiíoóöőuúüűÁÉIÍOÓÖŐUÚÜŰ]{2,20}\" required>\r\n                <span class=\"invalid-feedback\">Last name is invalid!</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n              <label for=\"dateOfBirth\">Date of birth</label>\r\n              <input type=\"date\" class=\"form-control\" name=\"dateOfBirth\" v-model=\"updatedUser.dateOfBirth\"\r\n                min=\"1900-01-01\" :max=\"getCurrentDate\" required>\r\n              <span class=\"invalid-feedback\">Date of birth is required!</span>\r\n            </div>\r\n\r\n            <div class=\"row\">\r\n              <div class=\"col-md-6 mb-3\">\r\n                <label for=\"username\">Username</label>\r\n                <input type=\"text\" class=\"form-control\" name=\"username\" v-model.trim=\"updatedUser.username\" readonly>\r\n              </div>\r\n              <div class=\"col-md-6 mb-3\">\r\n                <label for=\"email\">E-mail</label>\r\n                <input type=\"email\" class=\"form-control\" name=\"email\" v-model.trim=\"updatedUser.email\" placeholder=\"E-mail\" required>\r\n                <span class=\"invalid-feedback\">E-mail is required!</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n              <label for=\"password\">Password</label>\r\n              <input type=\"password\" class=\"form-control\" :class=\"{ invalid: passwordValidity === 'invalid' }\" name=\"password\" v-model.trim=\"currentPassword\" placeholder=\"Password\" required>\r\n              <span class=\"invalid-feedback\">Password is required!</span>\r\n              <span class=\"err-msg\" v-if=\"passwordValidity == 'invalid'\">Your password is invalid!</span>\r\n            </div>\r\n\r\n            <div class=\"d-grid gap-2 col-4 mx-auto\">\r\n              <button class=\"btn btn-teal shadow-none my-3\" @click=\"submitted = true\" :disabled=\"loading\">Submit</button>\r\n            </div>\r\n\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UserService from \"@/services/user.service\";\r\nimport vuex from \"vuex\";\r\nimport bcrypt from 'bcryptjs';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      salt: bcrypt.genSaltSync(10),\r\n      currentPassword: \"\",\r\n      passwordValidity: \"pending\",\r\n      updatedUser: { ...this.user },\r\n      success: false,\r\n      loading: false,\r\n      submitted: false,\r\n      errorMessage: \"\",\r\n      currentDate:\"\",\r\n      firstNamePattern: '',\r\n      lastNamePattern: '',\r\n      passwordPattern: ''\r\n    }\r\n  },\r\n  props: {\r\n    user: {\r\n      type: Object,\r\n    }\r\n  },\r\n  computed: {\r\n    ...vuex.mapGetters([\"getCurrentDate\"])\r\n  },\r\n  methods: {\r\n    ...vuex.mapActions([\"updateUser\"]),\r\n    submitUpdatedData() {\r\n      this.loading = true;\r\n      if (\r\n        !this.updatedUser.firstName ||\r\n        !this.updatedUser.lastName ||\r\n        !this.updatedUser.dateOfBirth ||\r\n        !this.updatedUser.email ||\r\n        !this.updatedUser.username ||\r\n        !this.currentPassword\r\n      )  return;\r\n\r\n      if (this.currentPassword == this.user.password || bcrypt.compareSync(this.currentPassword, this.user.password)) {\r\n        this.passwordValidity = \"valid\";\r\n        this.updatedUser.password = this.currentPassword;\r\n      } else {\r\n        this.loading = false;\r\n        this.passwordValidity = \"invalid\";\r\n        return;\r\n      }\r\n\r\n      UserService.update(this.updatedUser)\r\n      .then(\r\n        (response) => {\r\n          response.data.password = this.currentPassword;\r\n          this.currentPassword =\"\";\r\n          const u = response.data;\r\n          this.updateUser(u);\r\n          this.success = true;\r\n          this.errorMessage = \"\";\r\n          this.$swal({\r\n            icon: 'success',\r\n            title:'Ok!',\r\n            showConfirmButton: false,\r\n            timer: 1500\r\n          });\r\n        },\r\n        error => {\r\n          if (!error.response) {\r\n            this.errorMessage =\r\n              \"Unexpected error: \" +\r\n              ((error && error.errorMessage) || error);\r\n          } else if (error.response.status === 401) {\r\n            this.errorMessage = \"Password is not valid!\";\r\n          } else if (error.response.status === 406) {\r\n            this.errorMessage = \"E-mail is already registered!\";\r\n          }\r\n          else {\r\n            this.errorMessage =\r\n              \"Error: \" + error.response.data.errors[0].defaultMessage;\r\n          }\r\n        }\r\n      )\r\n      .then(() => {\r\n        this.loading = false;\r\n      });\r\n    }\r\n  },\r\n  mounted () {\r\n    this.firstNamePattern = process.env.VUE_APP_FIRSTNAME_PATTERN;\r\n    this.lastNamePattern = process.env.VUE_APP_LASTNAME_PATTERN;\r\n    this.passwordPattern = process.env.VUE_APP_PASSWORD_PATTERN;\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import { render } from \"./UpdateUserData.vue?vue&type=template&id=34cd021e\"\nimport script from \"./UpdateUserData.vue?vue&type=script&lang=js\"\nexport * from \"./UpdateUserData.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./UpdateUser.vue?vue&type=template&id=6908253b\"\nimport script from \"./UpdateUser.vue?vue&type=script&lang=js\"\nexport * from \"./UpdateUser.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}